!function(){function e(e){var o=Math.pow(10,8);return e>=o?e-o:e-0}var o,n={},a=!(!window.android||!window.android.getImei),t=!1,i=!1;a&&(o=window.android,o.downloadByPid?t=!0:i=!0);var l={};n.getIMEI=function(){return a?(l.imei||(l.imei=o.getImei()),{imei:l.imei}):{imei:"000000000000000"}},n.makeToast=function(e){a?o.makeToast(e.msg):alert(e.msg)},n.getAppVersion=function(){if(a){if(!l.app_ver){var e={api:"tool",type:"tool_get_version_and_platform"};l.app_ver=o.callNativeApi(JSON.stringify(e))}var n=JSON.parse(l.app_ver);return{version:n.versioncode,app:n.platform}}return{version:"0001",app:"market"}},n.dialNumber=function(e){if(a){var n={api:"jump",type:"jump_dial",id:e.number+""};o.callNativeApi(JSON.stringify(n))}else console.log("dial number:"+e.number)},n.getNetworkType=function(){return a?{network:o.getNetworkType()}:{network:"wifi"}},n.copyText=function(e){a?o.clipboardText(e.text):console.log("call native copy:"+e.text)},n.getLoginInfo=function(){var e="",n="",t="";if(a){if(l.login_info)return{token:l.login_info.token,model:l.login_info.model,other:l.login_info.other};if(i){var r=o.getLoginInfo();r=r.split(";"),e=r[0],n=r[1],t=r[2]}else e=o.getToken(),n=o.getMobileName();e=decodeURIComponent(e),l.login_info={token:e,model:n,other:t}}return{token:e,model:n,other:t}},n.isLogin=function(){if(a){var e=o.isLogin().toLowerCase();return{login:"true"==e}}return"127.0.0.1"==location.hostname?{login:!0}:{login:!1}},n.doStartLogin=function(){a?i?o.doStartLogin(!0):o.startLogin():console.log("call native login")},n.isInstalled=function(e){return a?e["package"]?{install:"true"==o.isInstalled(e["package"]).toLowerCase()}:(console.log("no package for isInstalled"),null):"热血江湖"==e.name?{install:!0}:{install:!1}},n.getAppStatus=function(n){if(a){var t,l,r;if(i){if(!n["package"])return console.log("no package for getButtonStatus"),null;switch(t=o.getButtonStatus(n["package"])+""){case"0":l="安装",r="download";break;case"1":l="正在下载",r="pause";break;case"2":l="正在下载",r="pause";break;case"3":l="继续",r="download";break;case"4":l="等待中",r="pause";break;case"5":l="重试",r="download";break;case"6":l="继续",r="download";break;case"7":l="更新",r="download";break;case"8":l="打开",r="open";break;case"9":l="下载",r="download";break;case"10":l="下载",r="download";break;case"11":l="安装中",r="none";break;case"12":l="继续",r="download";break;default:l="下载",r="download"}}else{if(!n.pid)return console.log("no pid for getButtonStatus"),null;switch(t=o.getButtonStatus(e(n.pid))+""){case"0":l="安装",r="download";break;case"1":l="正在下载",r="pause";break;case"2":l="继续",r="download";break;case"3":l="安装",r="download";break;case"4":l="安装中",r="none";break;case"5":l="打开",r="open";break;default:l="下载",r="download"}}return{statusCode:t,buttonText:l,event:r}}return console.log("call native:getButtonStatus"),{statusCode:0,buttonText:"安装",event:"open"}},n.downloadApp=function(t){if(a)if(i){if(!t["package"]||!t.masterid)return void console.log("no package,masterid for downloadGameByPackageName");var l,r=n.getNetworkType().network;if(r.indexOf("unavailable")>=0)return void n.makeToast({msg:"网络无连接"});l=n.getAppStatus(t),12==l.statusCode&&n.cancelDownload(t),o.downloadGameByPackageName(t.masterid+"",t["package"])}else{if(!t.pid)return void console.log("no pid for downloadGameByPackageName");o.downloadByPid(e(t.pid))}else console.log("call native:downloadGameByPackageName")},n.getProgress=function(n){return a?i?n["package"]?{progress:o.getProgress(n["package"])}:(console.log("no package for getProgress"),null):n.pid?{progress:o.getProgress(e(n.pid))}:(console.log("no pid for getProgress"),null):{progress:"0"}},n.pauseDownload=function(n){if(a)if(i){if(!n["package"])return void console.log("no package for pauseDownload");o.pauseDownload(n["package"])}else{if(!n.pid)return void console.log("no pid for pauseByPid");o.pauseByPid(e(n.pid))}else console.log("call native:pauseDownload")},n.cancelDownload=function(e){a?o.cancelDownload(e["package"]):console.log("call native:cancelDownload")},n.openAppDetail=function(e){a?i?o.openActivity("oap://gc/dt?id="+e.masterid):o.openActivity("oap://mk/dt?id="+e.masterid):console.log("call native:openActivity")},n.openApp=function(e){if(a){if(!e["package"])return void console.log("no package for openApp");i?o.openGame(e["package"]):o.openApp(e["package"])}else console.log("call native:openApp")},n.openWebView=function(e){a?o.openWebView(e.title,e.url,e.type||0):window.location.assign(e.url)},n.closePage=function(){a?o.closePage():console.log("call native:closePage")},n.launHomeActivity=function(){a?o.launHomeActivity():console.log("call native:launHomeActivity")},n.slideImageView=function(e){if(a){if(!e.imglist)return void console.log("no imglist for slideImageView");var n=e.start||0;n<0&&(n=0),n>=e.imglist.length&&(n=e.imglist.length-1),o.showScreenshotView(e.imglist,n)}else console.log("call native:showScreenshotView")},n.startDuiBa=function(){a?o.startDuiBa(!0):console.log("call native:startDuiBa")},n.startShakeListener=function(e){if(a){if("function"!=typeof e.callback)return;window.JSBridge?window.JSBridge.onShake=function(){e.callback()}:window.JSBridge={onShake:function(){e.callback()}},o.startShakeListener()}else console.log("startShakeListener")},n.stopShakeListener=function(){window.JSBridge&&(window.JSBridge.onShake=function(){return 0}),a?o.stopShakeListener():console.log("stopShakeListener")},window.jsNativeBridge=n}();
!function(){function e(e,a){var t,n=a||"";for(var r in e)t=new RegExp("{{"+r+"}}","g"),n=n.replace(t,e[r]);return n}function a(a,t){for(var n=[],r=0,o=a.length;r<o;r++)n.push(e(a[r],t));return n.join("")}function t(e,a){a=a||window.location.search;var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=a.substr(a.indexOf("?")+1).match(t);return null!=n?n[2]:""}function n(e,a){return e.masterid&&e["package"]?(o[e["package"]]&&clearInterval(o[e["package"]]),void(o[e["package"]]=setInterval(function(){var t=jsNativeBridge.getAppStatus(e),n=null;"pause"==t.event?1!=t.statusCode&&2!=t.statusCode||(n=jsNativeBridge.getProgress(e).progress):"none"==t.event||("open"==t.event?clearInterval(o[e["package"]]):"download"==t.event&&(0!=t.statusCode&&7!=t.statusCode||clearInterval(o[e["package"]]))),a(t,n)},500))):void console.warn("need masterid and package")}function r(e){return e["package"]?void clearInterval(o[e["package"]]):void console.warn("need package")}var o={};window.utilTool={jsonToHtml:e,jsonListToHtml:a,getUrlQuery:t,watchAppStatus:n,stopWatchAppStatus:r}}();
!function(){function e(e){if(!location.host||c.test(location.host)||0==e.actid)return void console.log("report",e);var o={event:"100106",tags:{name:"603",imei:n.imei,model:n.model,gc30:n.token,env:n.env,id:e.actid,type:e.type,obj:e.data||""},timestamp:Date.now()},t=encodeURIComponent(JSON.stringify(o)),a="https://epoch.cdo.oppomobile.com/soporcollect/appevent/activite?data="+t+"&callback=onReportLoad",i=document.createElement("script");i.src=a,i.onload=function(){document.head.removeChild(this)},document.head.appendChild(i)}function o(e,o){l=e,s=o;var n,a,i;n="css|"+t(o[1]-o[0]),a="body|"+t(o[2]-o[1]),i="js|"+t(o[3]-o[2]),webReport({type:7,actid:e,data:n}),webReport({type:7,actid:e,data:a}),webReport({type:7,actid:e,data:i})}function t(e){var o=["500","1000","1500","2000","more"];return e<=500?o[0]:e<=1001?o[1]:e<=1500?o[2]:e<=2e3?o[3]:o[4]}var n={env:"rs",imei:"000000000000000",model:"web",token:""};if(window.android&&window.android.getImei){var a=window.android;if(n.imei=a.getImei(),a.getLoginInfo){var i=a.getLoginInfo();i=i.split(";"),n.token=decodeURIComponent(i[0]),n.model=i[1]}else n.token=decodeURIComponent(a.getToken()),n.model=a.getMobileName();if(a.callNativeApi){var d={api:"tool",type:"tool_get_version_and_platform"},r=a.callNativeApi(JSON.stringify(d));r=JSON.parse(r),"gamecenter"==r.platform&&(n.env="apk")}}var c=/(127\.0\.0|localhost|fs1\.storedev\.wanyol\.com|183\.131)/i;window.onReportLoad=function(e){console.log(e)},window.webReport=e;var p,m,l,s;window.addEventListener("load",function(e){p=Date.now(),console.info(p,"window onload");var o;if(window.performance&&window.performance.timing){var n=window.performance.timing;n.responseEnd>0?o=n.responseEnd:n.domLoading>0&&(o=n.domLoading)}if(!o&&s&&(o=s[0]),o&&l){var a,i;a="DOMContentLoaded|"+t(m-o),i="LoadEvent|"+t(p-o),webReport({type:7,actid:l,data:a}),webReport({type:7,actid:l,data:i})}}),document.addEventListener("DOMContentLoaded",function(e){m=Date.now(),console.info(m,"DOMContentLoaded")}),window.pageTimeReport=o}();